---
title: "LHA Assessment"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      message = FALSE,
                      warning = FALSE, fig.width=12, 
                      fig.height=10)
options(tidyverse.quiet = TRUE)
```

The intent of this report is to capture figures and tables relating to familiarize ourselves with LHA's. 

```{r}
library(targets)
library(bcmaps)
library(ggplot2)

tar_load(lha_popn)
summary(lha_popn$Total)
```

## What are Local Health Areas?

> The LHAs are a mutually exclusive and exhaustive classification of the land area in BC. LHAs are contiguous (land area is geographically adjacent) and fit within an existing geographical hierarchy structure, e.g., cannot violate higher-level geography boundaries such as the Health Service Delivery Areas (HSDA) and Health Authorities (HA).

```{r, echo=FALSE}
library(tmap)

tm_shape(bc_neighbours()) +
  tm_polygons(col = "white") +
  tm_shape(lha_popn) +
  tm_polygons(col = "Total", style = "kmeans") +
  tm_layout(title = "Local Health Area Population")

```


## Air Quality by Health Service Delivery Area
```{r}
tar_read(pm25_24h)$daily_avg %>% 
  ggplot(aes(date, y = avg_24h, colour = station_name)) +
  geom_line() +
  guides(colour=FALSE) +
  labs(y = "Daily PM 2.5 value", x = "Date") +
  facet_wrap(~hlth_service_dlvr_area_name) +
  theme(legend.position = "bottom")
```

## Daily Temperature by Health Service Delivery Area
```{r}
tar_read(weather_data) %>% 
  ggplot(aes(date, y = mean_temp, colour = station_name)) +
  geom_line() +
  guides(colour=FALSE) +
  labs(y = "Mean Daily Temperature", x = "Date") +
  facet_wrap(~hlth_service_dlvr_area_name) +
  theme(legend.position = "bottom")

```




